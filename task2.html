<!DOCTYPE html>
<html>
<head>
  <title>同时在一个坐标系中绘制折线图和条形图和k
  线图并交互</title>
  <script type="text/javascript" src="./echarts.min.js"></script>
</head>
<body>
  <!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->
  <div id="main" style="width: 600px;height:400px;"></div>

</body>
<script>
  var data={"list": [["2009/09/01", "AA", "12.05", "12.24", "11.48", "11.59", "330743"], ["2009/09/02", "AA", "11.46", "11.65", "11.29", "11.55", "260225"], ["2009/09/03", "AA", "11.95", "12.06", "11.8299", "12.01", "250746"], ["2009/09/04", "AA", "12.18", "12.22", "11.97", "12.18", "177572"], ["2009/09/09", "AA", "12.71", "12.89", "12.62", "12.81", "228106"], ["2009/09/10", "AA", "12.8", "12.9", "12.51", "12.84", "217327"], ["2009/09/11", "AA", "12.98", "13.17", "12.86", "12.99", "226136"], ["2009/09/14", "AA", "12.63", "12.95", "12.52", "12.94", "203262"], ["2009/09/15", "AA", "13.04", "14.09", "13.0017", "13.99", "498437"], ["2009/09/16", "AA", "14.4", "14.53", "13.05", "14.47", "452153"], ["2009/09/17", "AA", "14.5", "14.84", "13.94", "14.05", "404616"], ["2009/09/18", "AA", "14.24", "14.33", "13.86", "14.06", "347642"], ["2009/09/21", "AA", "13.73", "13.99", "13.55", "13.94", "219451"], ["2009/09/22", "AA", "14.23", "14.35", "14", "14.26", "367999"], ["2009/09/23", "AA", "14.39", "14.62", "14.11", "14.14", "241722"], ["2009/09/24", "AA", "14.22", "14.29", "13.41", "13.51", "365988"], ["2009/09/25", "AA", "13.36", "13.46", "13", "13.08", "302018"], ["2009/09/28", "AA", "13.23", "13.48", "13.1", "13.43", "203827"], ["2009/09/29", "AA", "13.56", "13.7", "13.23", "13.31", "226011"], ["2009/09/30", "AA", "13.51", "13.57", "13.02", "13.12", "318860"], ["2009/10/01", "AA", "13.36", "13.62", "12.9", "12.92", "517793"], ["2009/10/02", "AA", "12.6", "13.1", "12.51", "12.82", "344827"], ["2009/10/05", "AA", "13", "13.49", "12.85", "13.42", "321307"], ["2009/10/06", "AA", "13.82", "14.02", "13.64", "13.89", "409203"], ["2009/10/07", "AA", "14.04", "14.24", "13.85", "14.2", "543173"], ["2009/10/08", "AA", "15.01", "15.11", "14.29", "14.35", "1208024"], ["2009/10/09", "AA", "14.24", "14.44", "14.11", "14.24", "378109"], ["2009/10/12", "AA", "14.35", "14.46", "14.2", "14.25", "271490"], ["2009/10/13", "AA", "14.31", "14.37", "14", "14.11", "316382"], ["2009/10/14", "AA", "14.36", "14.38", "14.21", "14.32", "289201"], ["2009/10/15", "AA", "14.21", "14.38", "14.08", "14.36", "279387"], ["2009/10/16", "AA", "14.28", "14.28", "14", "14.04", "296618"], ["2009/10/19", "AA", "14.12", "14.2", "14.01", "14.07", "215704"], ["2009/10/20", "AA", "14.2", "14.23", "13.65", "13.79", "366106"], ["2009/10/21", "AA", "13.73", "14.17", "13.68", "13.82", "316831"], ["2009/10/22", "AA", "13.85", "14.15", "13.7", "14.04", "245027"], ["2009/10/23", "AA", "14.16", "14.23", "13.66", "13.73", "289307"], ["2009/10/26", "AA", "13.78", "14", "13.21", "13.28", "309389"], ["2009/10/27", "AA", "13.3", "13.38", "12.78", "12.81", "299080"], ["2009/10/28", "AA", "12.75", "12.77", "11.89", "11.93", "536062"], ["2009/11/05", "AA", "12.66", "12.9", "12.61", "12.89", "186393"], ["2009/11/06", "AA", "12.71", "13.1", "12.63", "12.89", "197643"], ["2009/11/09", "AA", "13.13", "13.37", "13.11", "13.34", "208096"], ["2009/11/10", "AA", "13.27", "13.58", "13.16", "13.47", "253448"], ["2009/11/11", "AA", "13.68", "13.77", "13.35", "13.43", "212731"], ["2009/11/12", "AA", "13.33", "13.65", "13.15", "13.2", "223085"], ["2009/11/13", "AA", "13.22", "13.29", "13.01", "13.18", "174425"], ["2009/11/16", "AA", "13.36", "13.73", "13.36", "13.61", "231952"], ["2009/11/17", "AA", "13.46", "13.77", "13.32", "13.76", "234178"], ["2009/11/18", "AA", "13.76", "13.8", "13.56", "13.76", "206300"], ["2009/11/19", "AA", "13.52", "13.54", "13.08", "13.22", "317893"], ["2009/11/20", "AA", "13.04", "13.15", "12.92", "13.13", "223225"], ["2009/11/23", "AA", "13.37", "13.44", "13.02", "13.06", "221442"], ["2009/11/24", "AA", "13.03", "13.06", "12.75", "12.92", "317084"], ["2009/11/25", "AA", "12.99", "13.12", "12.92", "13", "182169"], ["2009/11/27", "AA", "12.52", "12.8", "12.46", "12.66", "155675"], ["2009/11/30", "AA", "12.73", "12.82", "12.48", "12.52", "244137"], ["2009/12/01", "AA", "12.75", "12.96", "12.64", "12.8", "264140"], ["2009/12/02", "AA", "12.9", "13.64", "12.89", "13.64", "494175"], ["2009/12/03", "AA", "13.65", "13.65", "13.21", "13.27", "334263"], ["2009/12/04", "AA", "13.61", "13.74", "12.71", "12.99", "467771"], ["2009/12/07", "AA", "12.91", "13.28", "12.9", "13.05", "222260"], ["2009/12/08", "AA", "12.93", "12.97", "12.79", "12.87", "206941"], ["2009/12/09", "AA", "12.87", "13.1", "12.77", "13.08", "252745"], ["2009/12/10", "AA", "13.21", "13.59", "13.19", "13.5", "321248"], ["2009/12/11", "AA", "13.8", "14.69", "13.76", "14.61", "751936"], ["2009/12/14", "AA", "14.62", "15", "14.54", "14.82", "367498"], ["2009/12/15", "AA", "14.57", "14.88", "14.45", "14.68", "199004"], ["2009/12/16", "AA", "14.75", "15.15", "14.75", "14.9", "307624"], ["2009/12/17", "AA", "14.7", "14.8", "14.49", "14.5", "203873"], ["2009/12/18", "AA", "14.61", "14.73", "14.26", "14.58", "298588"], ["2009/12/21", "AA", "15.14", "15.98", "15.13", "15.73", "609435"], ["2009/12/22", "AA", "15.59", "15.81", "15.51", "15.79", "316790"], ["2009/12/23", "AA", "15.86", "16", "15.67", "16", "261719"], ["2009/12/24", "AA", "16.02", "16.37", "16.01", "16.34", "143272"], ["2009/12/28", "AA", "16.49", "16.51", "15.99", "16.1", "190169"], ["2009/12/29", "AA", "16.16", "16.28", "15.96", "16.03", "142751"], ["2009/12/30", "AA", "15.93", "16.35", "15.77", "16.3", "183481"], ["2009/12/31", "AA", "16.33", "16.39", "16.1", "16.12", "165002"], ["2010/01/04", "AA", "16.47", "16.89", "16.4", "16.65", "258893"], ["2010/01/05", "AA", "16.83", "16.85", "16.03", "16.13", "499275"], ["2010/01/06", "AA", "16.31", "17.06", "16.26", "16.97", "467503"], ["2010/01/07", "AA", "16.52", "16.66", "16.3", "16.61", "386415"], ["2010/01/08", "AA", "16.46", "17.02", "16.45", "17.02", "332461"], ["2010/01/11", "AA", "17.49", "17.6", "17.13", "17.45", "764418"], ["2010/01/12", "AA", "16.12", "16.25", "15.42", "15.52", "1558986"], ["2010/01/13", "AA", "15.77", "15.99", "15.41", "15.98", "58694"]]}
  // 基于准备好的dom，初始化echarts实例
  var myChart = echarts.init(document.getElementById('main'));

  // 指定图表的配置项和数据
  var option = {
      title: {
          text: 'ECharts 折线图和柱状图'
      },
      tooltip: {},
      legend: {
          data:['股票']
      },
      xAxis: {
          data: getDate(data),
          scale: true,
          type: 'category',
          boundaryGap : false,
          axisLine: {onZero: false},
          splitLine: {show: false},
          splitNumber: 20,
          min: 'dataMin',
          max: 'dataMax'
      },
      yAxis: {
        scale: true,
        splitArea: {
            show: true
        }
      },
      series: [{
          name: '股票',
          type: 'candlestick',
          data: getDataArr(data),
      },{
        name: '股票',
        type: 'line',
        data: getDataLast(data),
      },{
        name: '股票',
        type: 'bar',
        data: getDataLast(data),
      }],
      color:['#91c7ae'],
      dataZoom: [
        {
            id: 'dataZoomX',
            type: 'slider',
            xAxisIndex: [0],
            filterMode: 'filter'
        },
        {
            id: 'dataZoomY',
            type: 'slider',
            yAxisIndex: [0],
            filterMode: 'empty'
        },
        {
            id: 'dataZoomY1',
            type: 'inside',
            yAxisIndex: [0],
            filterMode: 'empty'
        },
        {
            id: 'dataZoomX1',
            type: 'slider',
            xAxisIndex: [0],
            filterMode: 'filter'
        },
    ],
  };

  // 使用刚指定的配置项和数据显示图表。
  myChart.setOption(option);

  function getDataArr(obj) {
    obj=JSON.parse(JSON.stringify(obj))
    arr=obj['list']
    arr=arr.map(function(item) {
      item.shift()
      item.shift()
      item.pop()
      item=item.map(function(a){
        return +a  //一定要是number类型
      })
      return item
    })
    return arr
  }
  function getDate(obj){
    arr=obj['list']
    arr=arr.map(function(item) {
      return item[0]
    })
    return arr
  }
  function getDataLast(obj){
    arr=obj['list']
    arr=arr.map(function(item) {
      return +item[6]/100000
    })
    return arr
  }
  console.log(getDataArr(data))
</script>
</html>